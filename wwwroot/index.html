<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8" />
    <title>Sign in/Sign up</title>
    <link rel="stylesheet" href="css/site.css" type="text/css">
</head>
<body>
    <form name="registeredForm">
        <div class="container">
            
            <div class="exitButton">
                <p>X</p>
            </div>

            <h1 align="center">Sign in</h1>

            <label for="name"><b>USERNAME</b></label>
            <input type="text" placeholder="Enter username..." name="name" required>

            <label for="password"><b>PASSWORD</b></label>
            <input type="password" placeholder="Enter password..." name="password" required>

            <label for="confirmPassword"><b>PASSWORD</b></label>
            <input type="password" placeholder="Confirm password..." name="confirmPassword" required>

            <p>By creating an account you agree to our <a href="#">Terms & Privacy</a>.</p>
            <button type="submit" class="registerbtn">SIGN IN</button>

        </div>
    </form>

    <script>
        // добавление
        async function createUser(userName, userPassword, userConfirmPassword) {

            const response = await fetch("api/users", {
                method: "POST",
                headers: { "Accept": "application/json", "Content-Type": "application/json" },
                body: JSON.stringify({
                    name: userName,
                    password: userPassword
                })
            });
            if (response.ok === true) {
                const product = await response.json();
                reset();
                document.querySelector("tbody").append(row(product));
            }
            else {
                const error = await response.json();
                console.log(error.message);
            }
        }

        // сброс данных формы после отправки
        function reset() {
            const form = document.forms["registeredForm"];
            form.reset();
            form.elements["id"].value = 0;
        }

        // сброс значений формы
        document.getElementById("reset").addEventListener("click", e => {

            e.preventDefault();
            reset();
        })

        // отправка формы
        document.forms["registeredForm"].addEventListener("submit", e => {
            e.preventDefault();
            const form = document.forms["registeredForm"];
            const id = form.elements["id"].value;
            const name = form.elements["name"].value;
            const password = form.elements["password"].value;
            createProduct(name, password);
        });
    </script>
</body>
</html>
